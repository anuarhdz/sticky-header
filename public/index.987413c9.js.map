{"mappings":"AAAA,MAAMA,UAAqBC,YAIzBC,oBACEC,KAAKC,OAASC,SAASC,eAAe,eACtCH,KAAKI,UAAYJ,KAAKC,OAAOI,cAAc,eAC3CL,KAAKM,aAAeN,KAAKC,OAAOI,cAAc,kBAC9CL,KAAKO,aAAe,GACpBP,KAAKQ,iBAAmB,EACxBR,KAAKS,eAAgB,EAErBT,KAAKU,gBAAkBV,KAAKW,SAASC,KAAKZ,MAC1CA,KAAKa,qBAAuB,IAAMb,KAAKS,eAAgB,EAEvDT,KAAKc,iBAAiB,sBAAuBd,KAAKa,sBAClDE,OAAOD,iBAAiB,SAAUd,KAAKU,iBAAiB,GAExDV,KAAKgB,iBAGPC,uBACEF,OAAOG,oBAAoB,SAAUlB,KAAKU,iBAC1CV,KAAKkB,oBAAoB,sBAAuBlB,KAAKa,sBAGvDG,iBACiB,IAAIG,sBAAqB,CAACC,EAASC,KAChDrB,KAAKO,aAAea,EAAQ,GAAGE,iBAC/BD,EAASE,gBAGFC,QAAQxB,KAAKC,QAGxBU,WACE,MAAMc,EAAYV,OAAOW,aAAexB,SAASyB,gBAAgBF,UACjE,GAAIA,EAAYzB,KAAKQ,kBAAoBiB,EAAYzB,KAAKO,aAAaqB,OAAQ,CAC7E,GAAI5B,KAAK6B,YAAa,OACtBC,sBAAsB9B,KAAK+B,KAAKnB,KAAKZ,YAC5ByB,EAAYzB,KAAKQ,kBAAoBiB,EAAYzB,KAAKO,aAAaqB,OACvE5B,KAAKS,eAGRM,OAAOiB,aAAahC,KAAKiC,aACzBjC,KAAKiC,YAAcC,YAAW,KAC5BlC,KAAKS,eAAgB,IACpB,IACHqB,sBAAsB9B,KAAK+B,KAAKnB,KAAKZ,QANrC8B,sBAAsB9B,KAAKmC,OAAOvB,KAAKZ,OAQhCyB,GAAazB,KAAKO,aAAa6B,KACxCN,sBAAsB9B,KAAKqC,MAAMzB,KAAKZ,OAExCA,KAAKQ,iBAAmBiB,EAG1BM,OACEO,QAAQC,IAAI,QACTvC,KAAKQ,iBAAmB,KACzBR,KAAKC,OAAOuC,UAAUC,IAAI,iBAI9BN,SACEG,QAAQC,IAAI,UACTvC,KAAKQ,iBAAmB,KACzBR,KAAKC,OAAOuC,UAAUE,OAAO,iBAIjCL,QACEC,QAAQC,IAAI,SAtEdI,cACEC,SAyEJC,eAAeC,OAAO,gBAAiBjD","sources":["src/StickyHeader.js"],"sourcesContent":["class StickyHeader extends HTMLElement {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.header = document.getElementById('main-header');\n    this.topHeader = this.header.querySelector('#top-header');\n    this.bottomHeader = this.header.querySelector('#bottom-header');\n    this.headerBounds = {};\n    this.currentScrollTop = 0;\n    this.preventReveal = false;\n\n    this.onScrollHandler = this.onScroll.bind(this);\n    this.hideHeaderOnScrollUp = () => this.preventReveal = true;\n\n    this.addEventListener('preventHeaderReveal', this.hideHeaderOnScrollUp);\n    window.addEventListener('scroll', this.onScrollHandler, false);\n\n    this.createObserver();\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener('scroll', this.onScrollHandler);\n    this.removeEventListener('preventHeaderReveal', this.hideHeaderOnScrollUp);\n  }\n\n  createObserver() {\n    let observer = new IntersectionObserver((entries, observer) => {\n      this.headerBounds = entries[0].intersectionRect;\n      observer.disconnect();\n    });\n\n    observer.observe(this.header);\n  }\n\n  onScroll() {\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    if (scrollTop > this.currentScrollTop && scrollTop > this.headerBounds.bottom) {\n      if (this.preventHide) return;\n      requestAnimationFrame(this.hide.bind(this));\n    } else if (scrollTop < this.currentScrollTop && scrollTop > this.headerBounds.bottom) {\n      if (!this.preventReveal) {\n        requestAnimationFrame(this.reveal.bind(this));\n      } else {\n        window.clearTimeout(this.isScrolling);\n        this.isScrolling = setTimeout(() => {\n          this.preventReveal = false;\n        }, 66);\n        requestAnimationFrame(this.hide.bind(this));\n      }\n    } else if (scrollTop <= this.headerBounds.top) {\n      requestAnimationFrame(this.reset.bind(this));\n    }\n    this.currentScrollTop = scrollTop;\n  }\n\n  hide() {\n    console.log('hide');\n    if(this.currentScrollTop > 200) {\n      this.header.classList.add('sticky-header');\n    }\n  }\n\n  reveal() {\n    console.log('reveal')\n    if(this.currentScrollTop < 100) {\n      this.header.classList.remove('sticky-header');\n    }\n  }\n\n  reset() {\n    console.log('reset');\n  }\n}\n\ncustomElements.define('sticky-header', StickyHeader);\n\n"],"names":["$bd240354f5451060$var$StickyHeader","HTMLElement","connectedCallback","this","header","document","getElementById","topHeader","querySelector","bottomHeader","headerBounds","currentScrollTop","preventReveal","onScrollHandler","onScroll","bind","hideHeaderOnScrollUp","addEventListener","window","createObserver","disconnectedCallback","removeEventListener","IntersectionObserver","entries","observer","intersectionRect","disconnect","observe","scrollTop","pageYOffset","documentElement","bottom","preventHide","requestAnimationFrame","hide","clearTimeout","isScrolling","setTimeout","reveal","top","reset","console","log","classList","add","remove","constructor","super","customElements","define"],"version":3,"file":"index.987413c9.js.map"}